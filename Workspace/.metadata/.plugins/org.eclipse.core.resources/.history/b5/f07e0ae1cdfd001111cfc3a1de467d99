mongoose = require('mongoose')
Schema = mongoose.Schema
ObjectId = Schema.ObjectId

###
@note
  MongoDB Collection
    db.users
@note
  MongoDB Indexes
    db.users.ensureIndex({ userName: 1}, { unique: true })
    
@author Nathan Klick
@copyright QRef 2012
@abstract
###
class UserSchemaInternal 
	userName: 
		type: String
		required: true
		unique: true
	passwordHash: 
		type: String
		required: false
	passwordSalt: 
		type: String
		required: true
	firstName: 
		type: String
		required: false
	lastName:
		type: String
		required: false
	emailAddress:
		type: String
		required: true
	roles: [
		type: ObjectId,
		ref: 'user.roles'
	]
	recoveryQuestion:
		type: ObjectId
		ref: 'user.recovery.questions'
		required: false
	recoveryAnswer:
		type: String
		required: false

UserSchema = new Schema(new UserSchemaInternal())
module.exports = UserSchema
	