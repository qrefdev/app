mongoose = require('mongoose')
class QRefDatabase
	connection: null
	url: 'mongodb://qref:qref@localhost/qref'
	User: null
	AuthToken: null
	Role: null
	RecoveryQuestion: null
	Schema: mongoose.Schema
	constructor: () ->
		@connection = mongoose.createConnection(@url)
		@.initialize()
	initialize: () ->
		RoleSchema = require('../schema/RoleSchema')
		@Role = @connection.model('user.roles', RoleSchema)
		RecoveryQuestionSchema = require('../schema/RecoveryQuestionSchema')
		@RecoveryQuestion = @connection.model('user.recovery.questions', RecoveryQuestionSchema)
		UserSchema = require('../schema/UserSchema')
		@User = @connection.model('users', UserSchema)
		AuthTokenSchema = require('../schema/AuthTokenSchema')
		@AuthToken = @connection.model('user.tokens', AuthTokenSchema)
	getConnection: () -> @connection
	getUrl: () -> @url
module.exports = QRefDatabase
		